{"openapi":"3.1.0","info":{"title":"RAG MCP Server","description":"\n    ## Hybrid RAG Server with MCP Protocol Support\n    \n    A powerful Retrieval-Augmented Generation (RAG) server that combines:\n    \n    * **Hybrid Search**: Vector similarity + BM25 lexical search\n    * **Document Processing**: Multi-format support (PDF, DOCX, TXT, HTML)\n    * **AI Generation**: Integration with vLLM for response generation\n    * **MCP Protocol**: Model Context Protocol support for AI agents\n    \n    ","contact":{"name":"Alberto Ferrer","url":"https://www.barrahome.org/","email":"albertof@barrahome.org","github":"https://github.com/bet0x/mcp_rag"},"license":{"name":"MIT License","url":"https://opensource.org/licenses/MIT"},"version":"2.1.0"},"servers":[{"url":"http://127.0.0.1:9000","description":"Development server"}],"paths":{"/documents/inspect":{"post":{"tags":["documents"],"summary":"Inspect uploaded document and return metadata","description":"Returns lightweight metadata like page_count without persisting","operationId":"inspect_document_documents_inspect_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_inspect_document_documents_inspect_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"Bearer Token":[]}]}},"/documents/upload":{"post":{"tags":["documents"],"summary":"Upload and process document(s)","description":"Upload single or multiple document files and process them for RAG indexing","operationId":"upload_document_documents_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_document_documents_upload_post"}}}},"responses":{"200":{"description":"Document(s) uploaded and processing started successfully","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/DocumentResponse"},{"$ref":"#/components/schemas/MultipleFileUploadResponse"},{"$ref":"#/components/schemas/AsyncUploadResponse"}],"title":"Response Upload Document Documents Upload Post"}}}},"400":{"description":"Invalid file format or parameters"},"409":{"description":"Document with identical content already exists"},"413":{"description":"File size exceeds maximum allowed size"},"422":{"description":"Validation error in request parameters"},"500":{"description":"Document processing failed"}},"security":[{"Bearer Token":[]}]}},"/documents/validate-url":{"post":{"tags":["documents"],"summary":"Validate URL accessibility","description":"Validate if a URL is accessible and contains a supported document format","operationId":"validate_url_documents_validate_url_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentFetchRequest"}}},"required":true},"responses":{"200":{"description":"URL validation completed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UrlValidationResponse"}}}},"400":{"description":"Invalid URL or unsupported format"},"408":{"description":"Request timeout"},"500":{"description":"Internal server error during validation"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"Bearer Token":[]}]}},"/documents/fetch":{"post":{"tags":["documents"],"summary":"Fetch and process a document from URL","description":"Fetch a document from a URL and process it for RAG indexing","operationId":"fetch_document_documents_fetch_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_fetch_document_documents_fetch_post"}}},"required":true},"responses":{"200":{"description":"Document fetched and processing started successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentResponse"}}}},"400":{"description":"Invalid URL, unsupported format, or validation error"},"408":{"description":"Request timeout while fetching document"},"409":{"description":"Document with identical content already exists"},"413":{"description":"File size exceeds maximum allowed size"},"500":{"description":"Document processing failed"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"Bearer Token":[]}]}},"/documents/":{"get":{"tags":["documents","documents"],"summary":"List documents","description":"Retrieve a paginated list of all documents with optional filtering","operationId":"list_documents_documents__get","security":[{"Bearer Token":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"status_filter","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status Filter"}}],"responses":{"200":{"description":"Paginated list of documents with metadata","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/documents/{document_id}":{"get":{"tags":["documents","documents"],"summary":"Get document details","description":"Retrieve detailed information about a specific document","operationId":"get_document_documents__document_id__get","security":[{"Bearer Token":[]}],"parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"integer","description":"ID of the document to retrieve","title":"Document Id"},"description":"ID of the document to retrieve"}],"responses":{"200":{"description":"Document metadata and processing information","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["documents","documents"],"summary":"Delete document","description":"Delete a document and all its associated chunks","operationId":"delete_document_documents__document_id__delete","security":[{"Bearer Token":[]}],"parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"integer","description":"ID of the document to delete","title":"Document Id"},"description":"ID of the document to delete"}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/documents/{document_id}/reprocess":{"post":{"tags":["documents","documents"],"summary":"Reprocess document metadata","description":"Reprocess an existing document to generate rich metadata without re-uploading","operationId":"reprocess_document_documents__document_id__reprocess_post","security":[{"Bearer Token":[]}],"parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"integer","description":"ID of the document to reprocess","title":"Document Id"},"description":"ID of the document to reprocess"}],"responses":{"200":{"description":"Updated document with rich metadata","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/documents/{document_id}/chunks":{"get":{"tags":["documents","documents"],"summary":"Get document chunks","description":"Retrieve all text chunks for a specific document","operationId":"get_document_chunks_documents__document_id__chunks_get","security":[{"Bearer Token":[]}],"parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"integer","description":"ID of the document","title":"Document Id"},"description":"ID of the document"},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"List of text chunks with metadata","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response Get Document Chunks Documents  Document Id  Chunks Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/documents/stats":{"get":{"tags":["documents","documents"],"summary":"Get document statistics","description":"Retrieve comprehensive statistics about documents and chunks","operationId":"get_document_stats_documents_stats_get","responses":{"200":{"description":"Document and chunk statistics","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentStats"}}}}},"security":[{"Bearer Token":[]}]}},"/documents/{document_id}/collections":{"post":{"tags":["documents","documents"],"summary":"Assign document to collections","description":"Assign a document to one or more collections","operationId":"assign_document_to_collections_documents__document_id__collections_post","security":[{"Bearer Token":[]}],"parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"integer","description":"ID of the document to assign","title":"Document Id"},"description":"ID of the document to assign"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentCollectionAssignment"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentWithCollections"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/documents/{document_id}/collections/{collection_id}":{"delete":{"tags":["documents","documents"],"summary":"Remove document from collection","description":"Remove a document from a specific collection","operationId":"remove_document_from_collection_documents__document_id__collections__collection_id__delete","security":[{"Bearer Token":[]}],"parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"integer","description":"ID of the document to remove","title":"Document Id"},"description":"ID of the document to remove"},{"name":"collection_id","in":"path","required":true,"schema":{"type":"integer","description":"ID of the collection to remove from","title":"Collection Id"},"description":"ID of the collection to remove from"}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/documents/{document_id}/retry":{"post":{"tags":["documents","documents"],"summary":"Retry processing failed document","description":"Retry processing a document that failed during initial processing","operationId":"retry_document_processing_documents__document_id__retry_post","security":[{"Bearer Token":[]}],"parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"integer","title":"Document Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/documents/preview-chunking":{"post":{"tags":["documents"],"summary":"Preview Chunking","description":"Preview how a document will be chunked with the specified strategy and parameters.\n\nThis endpoint processes the document using chonkie chunkers and returns the chunks\nfor preview purposes without saving to database.\n\nReturns the chunks with metadata including token counts, character counts, and positions.","operationId":"preview_chunking_documents_preview_chunking_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_preview_chunking_documents_preview_chunking_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"Bearer Token":[]}]}},"/documents/{document_id}/images/{image_filename}":{"get":{"tags":["documents"],"summary":"Get document image","description":"Retrieve a specific image from a document by filename","operationId":"get_document_image_documents__document_id__images__image_filename__get","parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"integer","description":"ID of the document","title":"Document Id"},"description":"ID of the document"},{"name":"image_filename","in":"path","required":true,"schema":{"type":"string","description":"Image filename (e.g., IMG_DOC123_P1_-1.png)","title":"Image Filename"},"description":"Image filename (e.g., IMG_DOC123_P1_-1.png)"}],"responses":{"200":{"description":"Image file","content":{"application/json":{"schema":{}}}},"404":{"description":"Document or image not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/documents/{document_id}/images/":{"get":{"tags":["documents"],"summary":"List document images","description":"Get metadata of all images extracted from a document","operationId":"list_document_images_documents__document_id__images__get","security":[{"Bearer Token":[]}],"parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"integer","description":"ID of the document","title":"Document Id"},"description":"ID of the document"}],"responses":{"200":{"description":"List of image metadata","content":{"application/json":{"schema":{}}}},"404":{"description":"Document not found"},"403":{"description":"Access denied"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/documents/documents/{document_id}/status":{"get":{"tags":["documents"],"summary":"Get document processing status","description":"Get the current processing status of a document","operationId":"get_document_status_documents_documents__document_id__status_get","security":[{"Bearer Token":[]}],"parameters":[{"name":"document_id","in":"path","required":true,"schema":{"type":"integer","title":"Document Id"}}],"responses":{"200":{"description":"Status retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskStatusResponse"}}}},"404":{"description":"Document not found"},"500":{"description":"Failed to retrieve status"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/search/hybrid":{"post":{"tags":["search"],"summary":"Perform hybrid search using vector + BM25 (optionally with HyDE)","description":"Execute hybrid search combining dense vector similarity and sparse BM25 retrieval, optionally enhanced with HyDE","operationId":"hybrid_search_search_hybrid_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchRequest"}}},"required":true},"responses":{"200":{"description":"Hybrid search completed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchResponse"}}}},"400":{"description":"Invalid search parameters"},"422":{"description":"Validation error in search request"},"500":{"description":"Hybrid search failed"}},"security":[{"Bearer Token":[]}]}},"/search/vector":{"post":{"tags":["search"],"summary":"Perform vector search (optionally with HyDE)","description":"Execute dense vector similarity search using pgvectorscale DiskANN index, optionally enhanced with HyDE","operationId":"vector_search_search_vector_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchRequest"}}},"required":true},"responses":{"200":{"description":"Vector search completed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchResponse"}}}},"400":{"description":"Invalid search parameters"},"422":{"description":"Validation error in search request"},"500":{"description":"Vector search failed"}},"security":[{"Bearer Token":[]}]}},"/search/bm25":{"post":{"tags":["search"],"summary":"Perform BM25 lexical search","description":"Execute sparse BM25 lexical search using BM25S for keyword-based retrieval","operationId":"bm25_search_search_bm25_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchRequest"}}},"required":true},"responses":{"200":{"description":"BM25 search completed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchResponse"}}}},"400":{"description":"Invalid search parameters"},"422":{"description":"Validation error in search request"},"500":{"description":"BM25 search failed"}},"security":[{"Bearer Token":[]}]}},"/search/generate":{"post":{"tags":["search"],"summary":"Generate response using RAG","description":"Generate a response using Retrieval-Augmented Generation (RAG) pipeline","operationId":"generate_response_search_generate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerationRequest"}}},"required":true},"responses":{"200":{"description":"RAG generation completed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerationResponse"}}}},"400":{"description":"Invalid generation parameters"},"422":{"description":"Validation error in generation request"},"500":{"description":"RAG generation failed"},"503":{"description":"LLM service unavailable"}},"security":[{"Bearer Token":[]}]}},"/search/generate/stream":{"post":{"tags":["search"],"summary":"Generate streaming response using RAG","description":"Generate a streaming response using Retrieval-Augmented Generation (RAG) pipeline with Server-Sent Events","operationId":"generate_streaming_response_search_generate_stream_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerationRequest"}}},"required":true},"responses":{"200":{"description":"RAG streaming generation completed successfully","content":{"application/json":{"schema":{}}}},"400":{"description":"Invalid generation parameters"},"422":{"description":"Validation error in generation request"},"500":{"description":"RAG generation failed"},"503":{"description":"LLM service unavailable"}},"security":[{"Bearer Token":[]}]}},"/admin/stats":{"get":{"tags":["admin"],"summary":"Get comprehensive system statistics","description":"Retrieve comprehensive system statistics for monitoring and capacity planning","operationId":"get_system_stats_admin_stats_get","responses":{"200":{"description":"System statistics retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SystemStats"}}}},"500":{"description":"Failed to retrieve system statistics"}},"security":[{"Bearer Token":[]}]}},"/admin/reindex":{"post":{"tags":["admin"],"summary":"Rebuild search indexes","description":"Rebuild all search indexes for optimal performance","operationId":"reindex_system_admin_reindex_post","security":[{"Bearer Token":[]}],"parameters":[{"name":"force","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Force"}}],"responses":{"200":{"description":"Reindexing process started successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReindexResponse"}}}},"500":{"description":"Failed to start reindexing process"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/config":{"get":{"tags":["admin"],"summary":"Get current system configuration","description":"Retrieve current system configuration settings for debugging and administration","operationId":"get_system_config_admin_config_get","responses":{"200":{"description":"System configuration retrieved successfully","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get System Config Admin Config Get"}}}},"500":{"description":"Failed to retrieve system configuration"}},"security":[{"Bearer Token":[]}]}},"/admin/status":{"get":{"tags":["admin"],"summary":"Get component status overview","description":"Get health status of all system components including database, search indexes, and observability","operationId":"get_component_status_admin_status_get","responses":{"200":{"description":"Component status retrieved successfully","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Component Status Admin Status Get"}}}},"500":{"description":"Failed to retrieve component status"}},"security":[{"Bearer Token":[]}]}},"/admin/optimize":{"post":{"tags":["admin"],"summary":"Optimize system performance","description":"Perform system optimization operations including database maintenance and cache warming","operationId":"optimize_system_admin_optimize_post","responses":{"200":{"description":"System optimization started successfully","content":{"application/json":{"schema":{}}}},"500":{"description":"Failed to start system optimization"}},"security":[{"Bearer Token":[]}]}},"/admin/bm25/presets":{"get":{"tags":["admin"],"summary":"Get available BM25 configuration presets","description":"Retrieve list of all available BM25 configuration presets","operationId":"get_bm25_presets_admin_bm25_presets_get","responses":{"200":{"description":"List of preset names and descriptions","content":{"application/json":{"schema":{}}}}},"security":[{"Bearer Token":[]}]}},"/admin/bm25/preset/{preset_name}":{"get":{"tags":["admin"],"summary":"Get specific BM25 configuration preset","description":"Retrieve detailed configuration for a specific preset","operationId":"get_bm25_preset_configuration_admin_bm25_preset__preset_name__get","security":[{"Bearer Token":[]}],"parameters":[{"name":"preset_name","in":"path","required":true,"schema":{"type":"string","title":"Preset Name"}}],"responses":{"200":{"description":"Complete configuration object for the preset","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/bm25/config":{"get":{"tags":["admin"],"summary":"Get current BM25 configuration","description":"Retrieve the current BM25 service configuration","operationId":"get_bm25_current_configuration_admin_bm25_config_get","responses":{"200":{"description":"Current configuration object","content":{"application/json":{"schema":{}}}}},"security":[{"Bearer Token":[]}]}},"/admin/bm25/config/update":{"post":{"tags":["admin"],"summary":"Update BM25 configuration","description":"Update the BM25 service configuration with new parameters","operationId":"update_bm25_configuration_admin_bm25_config_update_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BM25FullConfig"}}},"required":true},"responses":{"200":{"description":"Success status and updated configuration","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"Bearer Token":[]}]}},"/admin/bm25/preset/{preset_name}/load":{"post":{"tags":["admin"],"summary":"Load BM25 configuration preset","description":"Load a predefined configuration preset into the BM25 service","operationId":"load_bm25_preset_configuration_admin_bm25_preset__preset_name__load_post","security":[{"Bearer Token":[]}],"parameters":[{"name":"preset_name","in":"path","required":true,"schema":{"type":"string","title":"Preset Name"}}],"responses":{"200":{"description":"Success status and loaded configuration","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/bm25/rebuild":{"post":{"tags":["admin"],"summary":"Rebuild BM25 index","description":"Force rebuild the BM25 index with current configuration","operationId":"rebuild_bm25_index_admin_bm25_rebuild_post","security":[{"Bearer Token":[]}],"parameters":[{"name":"force_rebuild","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Force Rebuild"}}],"responses":{"200":{"description":"Success status and rebuild information","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/bm25/initialize":{"post":{"tags":["admin"],"summary":"Initialize BM25 service","description":"Initialize the BM25 service and build index from existing documents","operationId":"initialize_bm25_service_admin_bm25_initialize_post","responses":{"200":{"description":"Initialization status and results","content":{"application/json":{"schema":{}}}}},"security":[{"Bearer Token":[]}]}},"/admin/phoenix/health":{"get":{"tags":["admin"],"summary":"Check Phoenix observability health","description":"Check if Phoenix observability is healthy and operational","operationId":"check_phoenix_health_endpoint_admin_phoenix_health_get","responses":{"200":{"description":"Phoenix health status and configuration","content":{"application/json":{"schema":{}}}}},"security":[{"Bearer Token":[]}]}},"/admin/phoenix/debug":{"get":{"tags":["admin"],"summary":"Debug Phoenix client status","description":"Get detailed debug information about Phoenix client initialization","operationId":"debug_phoenix_client_admin_phoenix_debug_get","responses":{"200":{"description":"Detailed Phoenix client debug information","content":{"application/json":{"schema":{}}}}},"security":[{"Bearer Token":[]}]}},"/admin/bm25/health":{"get":{"tags":["admin"],"summary":"Check BM25 service health","description":"Check if the BM25 service is healthy and operational","operationId":"check_bm25_health_admin_bm25_health_get","responses":{"200":{"description":"Health status and service information","content":{"application/json":{"schema":{}}}}},"security":[{"Bearer Token":[]}]}},"/admin/bm25/storage/info":{"get":{"tags":["admin","admin","bm25"],"summary":"Get BM25 storage information","description":"Get information about BM25 storage mode and available indexes","operationId":"get_bm25_storage_info_admin_bm25_storage_info_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"Bearer Token":[]}]}},"/admin/bm25/storage/indexes":{"get":{"tags":["admin","admin","bm25"],"summary":"List BM25 database indexes","description":"List all BM25 indexes stored in the database","operationId":"list_bm25_database_indexes_admin_bm25_storage_indexes_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"Bearer Token":[]}]}},"/admin/bm25/storage/index/{index_name}":{"get":{"tags":["admin","admin","bm25"],"summary":"Get BM25 index metadata","description":"Get metadata for a specific BM25 index","operationId":"get_bm25_index_metadata_admin_bm25_storage_index__index_name__get","security":[{"Bearer Token":[]}],"parameters":[{"name":"index_name","in":"path","required":true,"schema":{"type":"string","title":"Index Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["admin","admin","bm25"],"summary":"Delete BM25 index","description":"Delete a BM25 index from the database","operationId":"delete_bm25_index_admin_bm25_storage_index__index_name__delete","security":[{"Bearer Token":[]}],"parameters":[{"name":"index_name","in":"path","required":true,"schema":{"type":"string","title":"Index Name"}},{"name":"force","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Force"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/bm25/storage/migrate":{"post":{"tags":["admin","admin","bm25"],"summary":"Migrate BM25 index to database","description":"Migrate BM25 index from disk storage to database storage","operationId":"migrate_bm25_to_database_admin_bm25_storage_migrate_post","security":[{"Bearer Token":[]}],"parameters":[{"name":"index_name","in":"query","required":false,"schema":{"type":"string","default":"default","title":"Index Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/bm25/invalidate":{"post":{"tags":["admin"],"summary":"Invalidate BM25 index cache","description":"Force BM25 index to be rebuilt on next search by invalidating the in-memory cache","operationId":"invalidate_bm25_cache_admin_bm25_invalidate_post","responses":{"200":{"description":"Success status","content":{"application/json":{"schema":{}}}}},"security":[{"Bearer Token":[]}]}},"/collections/":{"get":{"tags":["collections","collections"],"summary":"List all collections","description":"Retrieve a paginated list of all collections with document counts","operationId":"list_collections_collections__get","security":[{"Bearer Token":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of collections to skip for pagination","default":0,"title":"Skip"},"description":"Number of collections to skip for pagination"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Maximum number of collections to return","default":50,"title":"Limit"},"description":"Maximum number of collections to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["collections","collections"],"summary":"Create a new collection","description":"Create a new collection with the specified name and metadata","operationId":"create_collection_collections__post","security":[{"Bearer Token":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/collections/{collection_id}":{"get":{"tags":["collections","collections"],"summary":"Get collection by ID","description":"Retrieve detailed information about a specific collection","operationId":"get_collection_collections__collection_id__get","security":[{"Bearer Token":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"integer","title":"Collection Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["collections","collections"],"summary":"Update collection","description":"Update an existing collection's metadata","operationId":"update_collection_collections__collection_id__put","security":[{"Bearer Token":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"integer","title":"Collection Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CollectionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["collections","collections"],"summary":"Delete collection","description":"Delete a collection (cannot delete the default collection)","operationId":"delete_collection_collections__collection_id__delete","security":[{"Bearer Token":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"integer","title":"Collection Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/collections/{collection_id}/documents":{"get":{"tags":["collections","collections"],"summary":"Get documents in collection","description":"Retrieve all documents that belong to a specific collection","operationId":"get_collection_documents_collections__collection_id__documents_get","security":[{"Bearer Token":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"integer","title":"Collection Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of documents to skip for pagination","default":0,"title":"Skip"},"description":"Number of documents to skip for pagination"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Maximum number of documents to return","default":50,"title":"Limit"},"description":"Maximum number of documents to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DocumentWithCollections"},"title":"Response Get Collection Documents Collections  Collection Id  Documents Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/cache/status":{"get":{"tags":["cache"],"summary":"Get cache status","description":"Get current cache status and statistics.\n\nReturns:\n- Current cache mode (live or maintenance)\n- Cache statistics\n- Memory usage\n- Key counts by type","operationId":"get_cache_status_admin_cache_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"Bearer Token":[]}]}},"/admin/cache/mode":{"post":{"tags":["cache"],"summary":"Set cache mode","description":"Set cache operational mode.\n\nModes:\n- **live**: Normal operation with database + Redis cache\n- **maintenance**: Cache-only mode, database can be offline\n\nWhen entering maintenance mode with warm_cache=True:\n1. Loads all critical data into cache\n2. Sets long TTLs\n3. Switches to maintenance mode\n4. MCP continues to work with cached data\n\n**Use case**: Perform database maintenance without downtime","operationId":"set_cache_mode_admin_cache_mode_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CacheModeUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"Bearer Token":[]}]}},"/admin/cache/warm":{"post":{"tags":["cache"],"summary":"Warm cache","description":"Warm cache by loading frequently accessed data.\n\nLoads:\n- All chunks with embeddings\n- All documents\n- All collections\n- BM25 indexes\n\n**Use before entering maintenance mode for maximum uptime.**","operationId":"warm_cache_admin_cache_warm_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"Bearer Token":[]}]}},"/admin/cache/clear":{"post":{"tags":["cache"],"summary":"Clear cache","description":"Clear cache entries.\n\nOptions:\n- **clear_all**: Clear all cache entries\n- **pattern**: Clear entries matching pattern (e.g., \"embedding:*\", \"search:*\")\n\nPatterns:\n- `embedding:*` - All embeddings\n- `search:*` - All search results\n- `chunk:*` - All chunks\n- `document:*` - All documents\n- `bm25:*` - BM25 indexes","operationId":"clear_cache_admin_cache_clear_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CacheClearRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"Bearer Token":[]}]}},"/admin/cache/health":{"get":{"tags":["cache"],"summary":"Cache health check","description":"Check if Redis cache is healthy and reachable.\n\nReturns:\n- Connection status\n- Current mode\n- Basic statistics","operationId":"cache_health_check_admin_cache_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"Bearer Token":[]}]}},"/sharepoint/parse-site-page":{"post":{"tags":["sharepoint","sharepoint"],"summary":"Parse SharePoint site page to Markdown","description":"Reads SharePoint site page content via Microsoft Graph and returns Markdown","operationId":"parse_site_page_sharepoint_parse_site_page_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ParseSitePageRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ParseSitePageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"Bearer Token":[]}]}},"/api":{"get":{"tags":["system"],"summary":"API endpoint - Server information","description":"Get basic server information and available endpoints","operationId":"api_info_api_get","responses":{"200":{"description":"Server information including version, status, and available endpoints","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"tags":["system"],"summary":"Detailed health check","description":"Perform comprehensive health check of all system components","operationId":"health_check_health_get","responses":{"200":{"description":"Detailed health status of all system components","content":{"application/json":{"schema":{}}}}},"security":[{"Bearer Token":[]}]}},"/{full_path}":{"get":{"summary":"Serve Spa","operationId":"serve_spa__full_path__get","parameters":[{"name":"full_path","in":"path","required":true,"schema":{"type":"string","title":"Full Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AsyncUploadResponse":{"properties":{"task_id":{"type":"string","title":"Task Id","description":"Task ID for tracking progress","example":"34de06a2-d7f7-4c9f-8a9d-c6c3a5683404"},"document_id":{"type":"integer","title":"Document Id","description":"Document ID in database","example":123},"status":{"type":"string","title":"Status","description":"Initial status: queued","example":"queued"},"message":{"type":"string","title":"Message","description":"Status message","example":"Document queued for processing"},"estimated_processing_time":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Estimated Processing Time","description":"Estimated time in seconds","example":300}},"type":"object","required":["task_id","document_id","status","message"],"title":"AsyncUploadResponse","description":"Response model for async document upload."},"BM25AdvancedConfig":{"properties":{"backend":{"$ref":"#/components/schemas/BackendType","description":"Backend for BM25 computation","default":"auto"},"dtype":{"$ref":"#/components/schemas/DataType","description":"Data type for BM25 scores","default":"float32"},"int_dtype":{"$ref":"#/components/schemas/IntDataType","description":"Data type for indices","default":"int32"},"use_mmap":{"type":"boolean","title":"Use Mmap","description":"Use memory-mapped files for large indices","default":false},"enable_numba":{"type":"boolean","title":"Enable Numba","description":"Enable Numba JIT compilation for 2x speedup","default":true},"n_threads":{"type":"integer","maximum":32.0,"minimum":-1.0,"title":"N Threads","description":"Number of threads (-1=all CPUs, 0=sequential, >0=specific count)","default":0}},"type":"object","title":"BM25AdvancedConfig","description":"Advanced BM25 configuration for performance optimization."},"BM25BasicConfig":{"properties":{"method":{"$ref":"#/components/schemas/BM25Method","description":"BM25 algorithm variant to use","default":"lucene"},"k1":{"type":"number","maximum":3.0,"minimum":1.0,"title":"K1","description":"Term frequency saturation parameter (1.0-3.0)","default":1.5},"b":{"type":"number","maximum":1.0,"minimum":0.0,"title":"B","description":"Length normalization parameter (0.0-1.0)","default":0.75},"delta":{"anyOf":[{"type":"number","maximum":2.0,"minimum":0.0},{"type":"null"}],"title":"Delta","description":"Delta parameter for BM25L/BM25+ variants (0.0-2.0)","default":0.5},"idf_method":{"anyOf":[{"$ref":"#/components/schemas/IDFMethod"},{"type":"null"}],"description":"IDF calculation method (auto uses same as BM25 method)"}},"type":"object","title":"BM25BasicConfig","description":"Basic BM25 configuration parameters."},"BM25FullConfig":{"properties":{"basic":{"$ref":"#/components/schemas/BM25BasicConfig"},"advanced":{"$ref":"#/components/schemas/BM25AdvancedConfig"},"preprocessing":{"$ref":"#/components/schemas/BM25PreprocessingConfig"},"performance":{"$ref":"#/components/schemas/BM25PerformanceConfig"},"config_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Config Name","description":"Name for this configuration preset"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Description of this configuration"},"created_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created At","description":"Configuration creation timestamp"}},"type":"object","title":"BM25FullConfig","description":"Complete BM25 configuration combining all aspects."},"BM25Method":{"type":"string","enum":["lucene","robertson","atire","bm25l","bm25+"],"title":"BM25Method","description":"BM25 algorithm variants."},"BM25PerformanceConfig":{"properties":{"index_persistence":{"additionalProperties":true,"type":"object","title":"Index Persistence","description":"Index persistence configuration","default":{"enabled":true,"auto_save":true,"save_corpus":true}},"incremental_updates":{"additionalProperties":true,"type":"object","title":"Incremental Updates","description":"Incremental update configuration","default":{"enabled":true,"batch_size":1000,"auto_rebuild_threshold":10000}},"search_behavior":{"additionalProperties":true,"type":"object","title":"Search Behavior","description":"Search behavior configuration","default":{"return_scores":true,"normalize_scores":true,"sorted_results":true,"progress_bars":true,"leave_progress":false}},"retrieval_config":{"additionalProperties":true,"type":"object","title":"Retrieval Config","description":"Retrieval configuration","default":{"max_results":1000,"chunk_size":50,"show_progress":true}}},"type":"object","title":"BM25PerformanceConfig","description":"BM25 performance and behavior configuration."},"BM25PreprocessingConfig":{"properties":{"stopwords":{"$ref":"#/components/schemas/StopwordLanguage","description":"Stopword language or custom handling","default":"en"},"custom_stopwords":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Custom Stopwords","description":"Custom stopword list (used when stopwords='custom')"},"stemming":{"$ref":"#/components/schemas/StemmingType","description":"Stemming type for text preprocessing","default":"english"},"custom_stemmer":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Custom Stemmer","description":"Custom stemmer function (used when stemming='custom')"},"splitter":{"$ref":"#/components/schemas/SplitterType","description":"Tokenization splitter method","default":"whitespace"},"custom_splitter":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Custom Splitter","description":"Custom splitter regex or function (used when splitter='custom')"}},"type":"object","title":"BM25PreprocessingConfig","description":"BM25 preprocessing configuration for tokenization and text processing."},"BackendType":{"type":"string","enum":["auto","numpy","numba","jax"],"title":"BackendType","description":"Backend options for BM25 computation."},"Body_fetch_document_documents_fetch_post":{"properties":{"url":{"type":"string","title":"Url","description":"URL to fetch document from"},"filename":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Filename","description":"Optional custom filename"},"chunker":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Chunker","description":"Chunking strategy to use: recursive, semantic, sentence, or token"},"chunk_size":{"anyOf":[{"type":"integer","maximum":2048.0,"minimum":50.0},{"type":"null"}],"title":"Chunk Size","description":"Chunk size in tokens (default: 512)"},"overlap":{"anyOf":[{"type":"integer","maximum":200.0,"minimum":0.0},{"type":"null"}],"title":"Overlap","description":"Chunk overlap in tokens (default: 50)"},"threshold":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.1},{"type":"null"}],"title":"Threshold","description":"Semantic similarity threshold (0.1-1.0, default: 0.6)"},"similarity_window":{"anyOf":[{"type":"integer","maximum":10.0,"minimum":1.0},{"type":"null"}],"title":"Similarity Window","description":"Similarity window size (default: 3)"},"min_sentences_per_chunk":{"anyOf":[{"type":"integer","maximum":10.0,"minimum":1.0},{"type":"null"}],"title":"Min Sentences Per Chunk","description":"Minimum sentences per chunk (default: 2)"},"min_characters_per_sentence":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":5.0},{"type":"null"}],"title":"Min Characters Per Sentence","description":"Minimum characters per sentence (default: 12)"},"chunk_overlap_percentage":{"anyOf":[{"type":"number","maximum":50.0,"minimum":0.0},{"type":"null"}],"title":"Chunk Overlap Percentage","description":"Chunk overlap percentage (0-50%, default: 10)"}},"type":"object","required":["url"],"title":"Body_fetch_document_documents_fetch_post"},"Body_inspect_document_documents_inspect_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"Single document to inspect"}},"type":"object","required":["file"],"title":"Body_inspect_document_documents_inspect_post"},"Body_preview_chunking_documents_preview_chunking_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"chunker":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Chunker"},"chunk_size":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Chunk Size"},"overlap":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Overlap"},"page_from":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Page From"},"page_to":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Page To"},"threshold":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Threshold"},"similarity_window":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Similarity Window"},"min_sentences_per_chunk":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Min Sentences Per Chunk"},"min_characters_per_sentence":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Min Characters Per Sentence"},"chunk_overlap_percentage":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Chunk Overlap Percentage"}},"type":"object","required":["file"],"title":"Body_preview_chunking_documents_preview_chunking_post"},"Body_upload_document_documents_upload_post":{"properties":{"file":{"anyOf":[{"type":"string","format":"binary"},{"type":"null"}],"title":"File","description":"Single document file to upload and process"},"files":{"anyOf":[{"items":{"type":"string","format":"binary"},"type":"array"},{"type":"null"}],"title":"Files","description":"Multiple document files to upload and process"},"chunker":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Chunker","description":"Chunking strategy to use: recursive, semantic, sentence, or token"},"chunk_size":{"anyOf":[{"type":"integer","maximum":2048.0,"minimum":50.0},{"type":"null"}],"title":"Chunk Size","description":"Chunk size in tokens (default: 512)"},"overlap":{"anyOf":[{"type":"integer","maximum":200.0,"minimum":0.0},{"type":"null"}],"title":"Overlap","description":"Chunk overlap in tokens (default: 50)"},"threshold":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.1},{"type":"null"}],"title":"Threshold","description":"Semantic similarity threshold (0.1-1.0, default: 0.6)"},"similarity_window":{"anyOf":[{"type":"integer","maximum":10.0,"minimum":1.0},{"type":"null"}],"title":"Similarity Window","description":"Similarity window size (default: 3)"},"min_sentences_per_chunk":{"anyOf":[{"type":"integer","maximum":10.0,"minimum":1.0},{"type":"null"}],"title":"Min Sentences Per Chunk","description":"Minimum sentences per chunk (default: 2)"},"min_characters_per_sentence":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":5.0},{"type":"null"}],"title":"Min Characters Per Sentence","description":"Minimum characters per sentence (default: 12)"},"chunk_overlap_percentage":{"anyOf":[{"type":"number","maximum":50.0,"minimum":0.0},{"type":"null"}],"title":"Chunk Overlap Percentage","description":"Chunk overlap percentage (0-50%, default: 10)"},"process_immediately":{"type":"boolean","title":"Process Immediately","description":"Whether to process documents immediately or queue for later processing","default":true},"enable_preview":{"type":"boolean","title":"Enable Preview","description":"Whether to generate chunk preview (optional, per-file)","default":false},"page_from":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Page From","description":"Start page (1-based, inclusive)"},"page_to":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Page To","description":"End page (1-based, inclusive)"}},"type":"object","title":"Body_upload_document_documents_upload_post"},"CacheClearRequest":{"properties":{"pattern":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pattern"},"clear_all":{"type":"boolean","title":"Clear All","default":false}},"type":"object","title":"CacheClearRequest","description":"Request model for clearing cache."},"CacheModeUpdate":{"properties":{"mode":{"type":"string","title":"Mode"},"warm_cache":{"type":"boolean","title":"Warm Cache","default":true}},"type":"object","required":["mode"],"title":"CacheModeUpdate","description":"Request model for updating cache mode."},"CollectionCreate":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name","description":"Name of the collection","example":"Documentacin Tcnica"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Description of the collection","example":"Collection for technical documentation"},"is_public":{"type":"boolean","title":"Is Public","description":"Whether the collection is public","default":true,"example":true}},"type":"object","required":["name"],"title":"CollectionCreate","description":"Request model for creating a new collection."},"CollectionListResponse":{"properties":{"collections":{"items":{"$ref":"#/components/schemas/CollectionResponse"},"type":"array","title":"Collections","description":"List of collections in current page"},"total":{"type":"integer","title":"Total","description":"Total number of collections","example":10},"skip":{"type":"integer","title":"Skip","description":"Number of collections skipped for pagination","example":0},"limit":{"type":"integer","title":"Limit","description":"Maximum number of collections per page","example":50}},"type":"object","required":["collections","total","skip","limit"],"title":"CollectionListResponse","description":"Response model for paginated collection listing."},"CollectionResponse":{"properties":{"id":{"type":"integer","title":"Id","description":"Unique collection identifier","example":1},"name":{"type":"string","title":"Name","description":"Name of the collection","example":"Documentacin Tcnica"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Description of the collection","example":"Collection for technical documentation"},"is_default":{"type":"boolean","title":"Is Default","description":"Whether this is the default collection","example":false},"document_count":{"type":"integer","title":"Document Count","description":"Number of documents in this collection","example":15},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Timestamp when collection was created","example":"2024-01-15T10:30:00Z"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","description":"Timestamp when collection was last updated","example":"2024-01-15T10:30:00Z"},"created_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Created By","description":"User who created the collection","example":"admin"},"is_public":{"type":"boolean","title":"Is Public","description":"Whether the collection is public","example":true},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata","description":"Additional collection metadata"}},"type":"object","required":["id","name","is_default","document_count","created_at","updated_at","is_public"],"title":"CollectionResponse","description":"Response model for collection information."},"CollectionUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Name","description":"Name of the collection","example":"Documentacin Tcnica"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Description of the collection","example":"Collection for technical documentation"},"is_public":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Public","description":"Whether the collection is public","example":true}},"type":"object","title":"CollectionUpdate","description":"Request model for updating an existing collection."},"DataType":{"type":"string","enum":["float32","float64"],"title":"DataType","description":"Data type options for performance optimization."},"DocumentCollectionAssignment":{"properties":{"collection_ids":{"items":{"type":"integer"},"type":"array","minItems":1,"title":"Collection Ids","description":"List of collection IDs to assign the document to","example":[1,2,3]}},"type":"object","required":["collection_ids"],"title":"DocumentCollectionAssignment","description":"Request model for assigning documents to collections."},"DocumentFetchRequest":{"properties":{"url":{"type":"string","title":"Url","description":"URL to fetch document from","example":"https://example.com/research-paper.pdf"},"filename":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Filename","description":"Optional custom filename","example":"custom-name.pdf"}},"type":"object","required":["url"],"title":"DocumentFetchRequest","description":"Request model for fetching documents from URLs."},"DocumentListResponse":{"properties":{"documents":{"items":{"$ref":"#/components/schemas/DocumentResponse"},"type":"array","title":"Documents","description":"List of documents in current page"},"total":{"type":"integer","title":"Total","description":"Total number of documents matching the query","example":150},"skip":{"type":"integer","title":"Skip","description":"Number of documents skipped for pagination","example":0},"limit":{"type":"integer","title":"Limit","description":"Maximum number of documents per page","example":50}},"type":"object","required":["documents","total","skip","limit"],"title":"DocumentListResponse","description":"Response model for paginated document listing."},"DocumentResponse":{"properties":{"id":{"type":"integer","title":"Id","description":"Unique document identifier","example":123},"filename":{"type":"string","title":"Filename","description":"Original filename of the uploaded document","example":"research_paper.pdf"},"content_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content Type","description":"MIME type of the document","example":"application/pdf"},"file_size":{"type":"integer","title":"File Size","description":"File size in bytes","example":2048576},"status":{"type":"string","title":"Status","description":"Processing status: processing, completed, or failed","example":"completed"},"processed_at":{"type":"string","format":"date-time","title":"Processed At","description":"Timestamp when document processing completed","example":"2024-01-15T10:30:00Z"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata","description":"Additional document metadata and processing information"},"chunk_count":{"type":"integer","title":"Chunk Count","description":"Number of text chunks created from this document","example":45},"source_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source Url","description":"Source URL if document was fetched from web","example":"https://example.com/document.pdf"}},"type":"object","required":["id","filename","file_size","status","processed_at","chunk_count"],"title":"DocumentResponse","description":"Response model for document information."},"DocumentStats":{"properties":{"document_id":{"type":"integer","title":"Document Id","description":"Unique document identifier","example":123},"chunk_count":{"type":"integer","title":"Chunk Count","description":"Total number of chunks created from this document","example":45},"total_tokens":{"type":"integer","title":"Total Tokens","description":"Total token count across all chunks","example":12500},"avg_tokens_per_chunk":{"type":"number","title":"Avg Tokens Per Chunk","description":"Average tokens per chunk","example":277.8},"min_tokens_per_chunk":{"type":"integer","title":"Min Tokens Per Chunk","description":"Minimum tokens in any chunk","example":150},"max_tokens_per_chunk":{"type":"integer","title":"Max Tokens Per Chunk","description":"Maximum tokens in any chunk","example":512},"file_size":{"type":"integer","title":"File Size","description":"Original file size in bytes","example":2048576},"processing_status":{"type":"string","title":"Processing Status","description":"Current processing status","example":"completed"}},"type":"object","required":["document_id","chunk_count","total_tokens","avg_tokens_per_chunk","min_tokens_per_chunk","max_tokens_per_chunk","file_size","processing_status"],"title":"DocumentStats","description":"Detailed statistics for a specific document."},"DocumentWithCollections":{"properties":{"id":{"type":"integer","title":"Id","description":"Unique document identifier","example":123},"filename":{"type":"string","title":"Filename","description":"Original filename of the uploaded document","example":"research_paper.pdf"},"content_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content Type","description":"MIME type of the document","example":"application/pdf"},"file_size":{"type":"integer","title":"File Size","description":"File size in bytes","example":2048576},"status":{"type":"string","title":"Status","description":"Processing status: processing, completed, or failed","example":"completed"},"processed_at":{"type":"string","format":"date-time","title":"Processed At","description":"Timestamp when document processing completed","example":"2024-01-15T10:30:00Z"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata","description":"Additional document metadata and processing information"},"chunk_count":{"type":"integer","title":"Chunk Count","description":"Number of text chunks created from this document","example":45},"collections":{"items":{"$ref":"#/components/schemas/CollectionResponse"},"type":"array","title":"Collections","description":"List of collections this document belongs to"}},"type":"object","required":["id","filename","file_size","status","processed_at","chunk_count","collections"],"title":"DocumentWithCollections","description":"Extended document response that includes collection information."},"FileUploadResult":{"properties":{"filename":{"type":"string","title":"Filename","description":"Original filename of the uploaded file","example":"document.pdf"},"document_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Document Id","description":"Document ID if successfully created","example":123},"status":{"type":"string","title":"Status","description":"Upload status: completed, queued, failed, or duplicate","example":"completed"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error","description":"Error message if upload failed"},"task_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Task Id","description":"Task ID for async processing","example":"34de06a2-d7f7-4c9f-8a9d-c6c3a5683404"}},"type":"object","required":["filename","status"],"title":"FileUploadResult","description":"Result for a single file upload."},"GenerationRequest":{"properties":{"query":{"type":"string","maxLength":2000,"minLength":1,"title":"Query","description":"User query for generation","example":"Explain the benefits of machine learning"},"top_k":{"anyOf":[{"type":"integer","maximum":50.0,"minimum":1.0},{"type":"null"}],"title":"Top K","description":"Number of chunks to retrieve for context","default":5,"example":10},"collections":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Collections","description":"Filter by collection IDs. If None, search in all documents","example":[1,2]},"search_method":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search Method","description":"Search method to use: 'hybrid', 'vector', or 'bm25'","default":"hybrid","example":"hybrid"},"temperature":{"anyOf":[{"type":"number","maximum":2.0,"minimum":0.0},{"type":"null"}],"title":"Temperature","description":"Generation temperature (0.0-2.0, lower = more focused)","default":0.1,"example":0.7},"max_tokens":{"anyOf":[{"type":"integer","maximum":4096.0,"minimum":1.0},{"type":"null"}],"title":"Max Tokens","description":"Maximum tokens to generate in response","default":512,"example":1024},"include_sources":{"type":"boolean","title":"Include Sources","description":"Include source citations in response","default":true},"system_prompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"System Prompt","description":"Optional system prompt override","example":"You are a helpful AI assistant specialized in technical topics."},"conversation_history":{"anyOf":[{"items":{"additionalProperties":{"type":"string"},"type":"object"},"type":"array"},{"type":"null"}],"title":"Conversation History","description":"Previous conversation messages for context","example":[{"content":"Hello","role":"user"},{"content":"Hi there!","role":"assistant"}]},"use_hyde":{"type":"boolean","title":"Use Hyde","description":"Enable HyDE enhancement for retrieval","default":false},"bm25_weight":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Bm25 Weight","description":"BM25 weight for hybrid search (0.0-1.0, must sum to 1.0 with vector_weight)","example":0.5},"vector_weight":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Vector Weight","description":"Vector weight for hybrid search (0.0-1.0, must sum to 1.0 with bm25_weight)","example":0.5}},"type":"object","required":["query"],"title":"GenerationRequest","description":"Request model for RAG generation."},"GenerationResponse":{"properties":{"query":{"type":"string","title":"Query","description":"Original user query","example":"Explain the benefits of machine learning"},"response":{"type":"string","title":"Response","description":"Generated response text","example":"Machine learning offers several key benefits..."},"sources":{"items":{"$ref":"#/components/schemas/SourceCitation"},"type":"array","title":"Sources","description":"List of source citations used in generation"},"generation_time_ms":{"type":"integer","title":"Generation Time Ms","description":"Time taken for generation in milliseconds","example":2500},"model_used":{"type":"string","title":"Model Used","description":"Name of the LLM model used","example":"llama-2-7b-chat"},"context_length":{"type":"integer","title":"Context Length","description":"Total context length in tokens","example":2048},"retrieval_metadata":{"additionalProperties":true,"type":"object","title":"Retrieval Metadata","description":"Metadata about retrieval and generation process"}},"type":"object","required":["query","response","sources","generation_time_ms","model_used","context_length","retrieval_metadata"],"title":"GenerationResponse","description":"Response model for RAG generation."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"IDFMethod":{"type":"string","enum":["auto","lucene","robertson","atire"],"title":"IDFMethod","description":"IDF calculation methods."},"IntDataType":{"type":"string","enum":["int32","int64"],"title":"IntDataType","description":"Integer data type options."},"MultipleFileUploadResponse":{"properties":{"message":{"type":"string","title":"Message","description":"Summary message","example":"Processed 4 files"},"results":{"items":{"$ref":"#/components/schemas/FileUploadResult"},"type":"array","title":"Results","description":"Individual results for each file"},"summary":{"$ref":"#/components/schemas/MultipleFileUploadSummary","description":"Summary statistics"}},"type":"object","required":["message","results","summary"],"title":"MultipleFileUploadResponse","description":"Response model for multiple file uploads."},"MultipleFileUploadSummary":{"properties":{"total":{"type":"integer","title":"Total","description":"Total number of files processed","example":4},"completed":{"type":"integer","title":"Completed","description":"Number of files successfully completed","example":3},"queued":{"type":"integer","title":"Queued","description":"Number of files queued for processing","example":1},"failed":{"type":"integer","title":"Failed","description":"Number of files that failed","example":0},"duplicates":{"type":"integer","title":"Duplicates","description":"Number of duplicate files found","example":0}},"type":"object","required":["total","completed","queued","failed","duplicates"],"title":"MultipleFileUploadSummary","description":"Summary statistics for multiple file uploads."},"ParseSitePageRequest":{"properties":{"site_hostname":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Site Hostname","description":"SharePoint site hostname; must be allowed"},"site_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Site Path","description":"SharePoint site path; defaults to config"},"page_web_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Page Web Url","description":"Full webUrl of the site page"},"page_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Page Id","description":"Alternative page id (optional)"}},"type":"object","title":"ParseSitePageRequest"},"ParseSitePageResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"data":{"additionalProperties":true,"type":"object","title":"Data"}},"type":"object","required":["success","data"],"title":"ParseSitePageResponse"},"ReindexResponse":{"properties":{"status":{"type":"string","title":"Status","description":"Reindexing status: started, completed, or failed","example":"started"},"message":{"type":"string","title":"Message","description":"Status message describing the operation","example":"Reindexing process started in background"},"estimated_time_minutes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Estimated Time Minutes","description":"Estimated completion time in minutes","example":15},"task_id":{"type":"string","title":"Task Id","description":"Unique task identifier for tracking progress","example":"reindex-2024-01-15-123456"}},"type":"object","required":["status","message","task_id"],"title":"ReindexResponse","description":"Response for reindexing operations."},"SearchRequest":{"properties":{"query":{"type":"string","maxLength":1000,"minLength":1,"title":"Query","description":"Search query text","example":"machine learning algorithms"},"top_k":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":1.0},{"type":"null"}],"title":"Top K","description":"Number of results to return","default":5,"example":10},"filters":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Filters","description":"Optional filters for search (e.g., document_id, labels)","example":{"document_id":123}},"collections":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Collections","description":"Filter by collection IDs. If None, search in all documents","example":[1,2,3]},"include_metadata":{"type":"boolean","title":"Include Metadata","description":"Include chunk metadata in results","default":true},"use_hyde":{"type":"boolean","title":"Use Hyde","description":"Enable HyDE (Hypothetical Document Embeddings) enhancement","default":false},"include_hyde_draft":{"type":"boolean","title":"Include Hyde Draft","description":"Include HyDE draft in response metadata (for debugging)","default":false}},"type":"object","required":["query"],"title":"SearchRequest","description":"Request model for search operations."},"SearchResponse":{"properties":{"query":{"type":"string","title":"Query","description":"Original search query","example":"machine learning algorithms"},"results":{"items":{"$ref":"#/components/schemas/SearchResult"},"type":"array","title":"Results","description":"List of search results ranked by relevance"},"total_results":{"type":"integer","title":"Total Results","description":"Total number of results found","example":25},"search_method":{"type":"string","title":"Search Method","description":"Search method used: hybrid, vector, or bm25","example":"hybrid"},"retrieval_time_ms":{"type":"integer","title":"Retrieval Time Ms","description":"Time taken for retrieval in milliseconds","example":150},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata","description":"Additional search metadata and performance information"}},"type":"object","required":["query","results","total_results","search_method","retrieval_time_ms"],"title":"SearchResponse","description":"Response model for search operations."},"SearchResult":{"properties":{"chunk_id":{"type":"integer","title":"Chunk Id","description":"Unique chunk identifier","example":456},"document_id":{"type":"integer","title":"Document Id","description":"ID of the source document","example":123},"content":{"type":"string","title":"Content","description":"Text content of the chunk","example":"Machine learning is a subset of artificial intelligence..."},"score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Score","description":"Relevance score (0-1, higher is more relevant)","example":0.85},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata","description":"Additional chunk metadata and search information"}},"type":"object","required":["chunk_id","document_id","content","score"],"title":"SearchResult","description":"Individual search result."},"SourceCitation":{"properties":{"chunk_id":{"type":"integer","title":"Chunk Id","description":"Unique chunk identifier","example":456},"document_id":{"type":"integer","title":"Document Id","description":"ID of the source document","example":123},"relevance_score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Relevance Score","description":"Relevance score of this source (0-1)","example":0.85},"excerpt":{"type":"string","title":"Excerpt","description":"Relevant excerpt from source","example":"Machine learning algorithms can automatically improve their performance..."}},"type":"object","required":["chunk_id","document_id","relevance_score","excerpt"],"title":"SourceCitation","description":"Source citation for generated responses."},"SplitterType":{"type":"string","enum":["whitespace","regex","custom"],"title":"SplitterType","description":"Tokenization splitter options."},"StemmingType":{"type":"string","enum":["none","english","spanish","custom"],"title":"StemmingType","description":"Stemming options."},"StopwordLanguage":{"type":"string","enum":["none","en","es","fr","de","custom"],"title":"StopwordLanguage","description":"Supported stopword languages."},"SystemStats":{"properties":{"documents":{"additionalProperties":{"anyOf":[{"type":"integer"},{"type":"number"}]},"type":"object","title":"Documents","description":"Document statistics including counts and sizes"},"chunks":{"additionalProperties":{"anyOf":[{"type":"integer"},{"type":"number"}]},"type":"object","title":"Chunks","description":"Chunk statistics including counts and token metrics"},"search_indexes":{"additionalProperties":{"additionalProperties":true,"type":"object"},"type":"object","title":"Search Indexes","description":"Search index status and performance metrics"},"system_config":{"additionalProperties":true,"type":"object","title":"System Config","description":"Current system configuration parameters"}},"type":"object","required":["documents","chunks","search_indexes","system_config"],"title":"SystemStats","description":"Comprehensive system statistics."},"TaskStatusResponse":{"properties":{"task_id":{"type":"string","title":"Task Id","description":"Unique task identifier","example":"34de06a2-d7f7-4c9f-8a9d-c6c3a5683404"},"status":{"type":"string","title":"Status","description":"Current task status: queued, processing, completed, failed","example":"processing"},"progress":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Progress","description":"Progress metadata if available"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message","description":"Error message if failed"},"estimated_completion":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Estimated Completion","description":"Estimated completion time"}},"type":"object","required":["task_id","status"],"title":"TaskStatusResponse","description":"Response model for task status polling."},"UrlValidationResponse":{"properties":{"valid":{"type":"boolean","title":"Valid","description":"Whether the URL is valid and accessible","example":true},"filename":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Filename","description":"Detected filename from URL","example":"document.pdf"},"content_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content Type","description":"Detected content type","example":"application/pdf"},"content_length":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Content Length","description":"Content length in bytes","example":2048576},"file_extension":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"File Extension","description":"Detected file extension","example":"pdf"},"preview_content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Preview Content","description":"Base64 encoded preview content for document preview","example":"JVBERi0xLjQKJcOkw7zDtsO..."},"preview_size":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Preview Size","description":"Size of preview content in bytes","example":1024},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error","description":"Error message if validation failed"}},"type":"object","required":["valid"],"title":"UrlValidationResponse","description":"Response model for URL validation."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"Bearer Token":{"type":"http","description":"API token for accessing RAG MCP server endpoints","scheme":"bearer"}}}}