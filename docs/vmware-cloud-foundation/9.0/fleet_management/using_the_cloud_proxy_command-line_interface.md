---
source_url: https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-9-0-and-later/9-0/fleet-management/collecting-data-with-cloud-proxies-in-vrealize-operations-cloud/monitoring-the-health-of-cloud-proxies/upgrading-cloud-proxy/using-the-cloud-proxy-command-line-interface-on-cloud.html
product: vmware-cloud-foundation
version: 9.0
section: Fleet Management
breadcrumb: Fleet Management > Using the Cloud Proxy Command-Line Interface
---

# Using the Cloud Proxy Command-Line Interface

Use the cloud proxy command-line interface to upgrade your cloud proxy, generate support bundles, and view the cloud proxy health status.

You can use SSH to access the cloud proxy instance and use its command-line Interface to run the following actions:

- Manually upgrade your cloud proxy in case the automatic download of the latest binary fails. When the automatic download fails, you see a notification on the VCF Operations user interface. To manually upgrade your cloud proxy instance to the latest version, see the following KB article [80590](https://kb.vmware.com/s/article/80590).
- Generate the support bundle.
- Gather the status of the cloud proxy's health and connectivity details.

| Command Line | Description |
| --- | --- |
| cprc-cli -h, --help | Displays the help message and use of the command-line interface. |
| cprc-cli -s, --status | Prints the cloud proxy life-cycle status, configuration details, upgrade-related information, and more. It is useful to catch necessary information related to support and troubleshooting, or check the connection to VCF Operations, or check the product version number, and so on. |
| cprc-cli -u PRODUCT\_PAK, --upgrade PRODUCT\_PAK | The cloud proxy instance is enabled for an automated upgrade by default. But if the automated upgrade fails due to any exceptional issue, use this command line to upgrade your cloud proxy instance to the desired version. |
| cprc-cli -hsb  cprc-cli --generate-heavy-support-bundle  cprc-cli -sb [{false,true}]  cprc-cli --generate-support-bundle [{false,true}] | Generates the cloud proxy support bundle which is a package of logs, configurations, and status files. The support bundles are necessary for product support and troubleshooting. Generated support bundles can be found at the /storage/core/vmware-vrops-cprc/support location.  You can generate light or heavy support bundles. Heavy support bundles include journal.ctl logs. To generate heavy support bundles, the following commands must be set to true.  cprc-cli -sb [{true}]  cprc-cli --generate-support-bundle [{true}]  With the true option, the heavy support bundle is generated with journal.ctl logs. With the false option, the light support bundle is generated without journal.ctl logs. If no option is specified here, the light support bundle will be generated by default.  To exclude docker logs from the support bundles during generation, include the following options in the support bundle generation commands:  -ed  --exclude-docker-support-bundle |
| cprc-cli -ssb  cprc-cli --status-support-bundle | Displays the support bundle statuses. |
| cprc-cli -rsb SUPPORT\_BUNDLE, --remove-support-bundle SUPPORT\_BUNDLE | Removes any specified support bundle. Although generated support bundle packages can be removed using the system-embedded commands, it is recommended to use this command for that action. |
| cprc-cli -fm, --enable-fips-mode | Enables FIPS mode for cloud proxy. |
| cprc-cli -v -d all | install | network | services | connection | Runs the troubleshoot process to check for all or any one of the following issues:  - Installation: Checks if VM deployment and cloud proxy installation is successful. - Network: Checks IP configurations, DNS configurations, and Host (hostname) configurations. - Service: Checks whether the vmware-casa.service, collector.service, haproxy.service, httpd-north.service, and httpd-south.service are active and loaded based on the systemctl show command. - Connection: Checks the connection to VCF Operations cluster nodes using curl. For the proxy server cases, checks that connection via the proxy server using its specified configuration.   Use the -v command to generate more verbose outputs. This command generates a log file that gets stored in /var/log/support/cprc.analysis.log location. |
| -cs, --certificates-status | Displays the status of the imported certificates and if the certificates have been configured correctly or not. |
| cprc-cli -rc, --replace-certificate | Allows you to replace the self signed certificates for cloud proxy. Add the full path to the new certificate to the command. The function expects a certificate full chain containing the certificate and private key. For more information, see KB article [89583](https://kb.vmware.com/s/article/89583). |
| cprc-cli -cc, --connectivity-check | Allows you to run the connectivity check. You can check the HTTPS connectivity to a specified url. In case the url is not specified, it checks the HTTPS connectivity to the default prerequisites  For on-prem configurations, the default prerequisites are the cluster nodes. |
| cprc-cli -cc -r, --response | Displays the response from the server during the connectivity check. |
| cprc-cli -cc -rt, --routing | Displays the routing information during the connectivity check. |
| cprc-cli -env, --ovfenv | Displays the content of ovfEnv.xml file. |
| cprc-cli -rec, --recovery | Runs the CPRC recovery script. |
| cprc-cli -rh, --run-on-hosts | Runs a specific script on hosts according to the configurations provided. |
| cprc-cli -gt, --generate-template | Generates the template.json files for -rh options configurations. |